import{_ as f,r,u as h,c as b,a as s,t as u,w as i,v as p,b as d,d as w,o as x}from"./index-DPCorpo5.js";const y={class:"login-container"},k={class:"form-group"},C={class:"form-group"},V={class:"code-input"},U={__name:"LoginView",setup(B){const l=r(""),n=r(""),o=r(!1),c=w(),v=h(),g=async()=>{var a,e;try{await d.post("http://localhost:3000/api/send-code",{phone:l.value}),alert("验证码已发送")}catch(t){alert("发送验证码失败: "+((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||t.message)}},m=async()=>{var a,e;try{const t=o.value?"register":"login",{data:_}=await d.post(`http://localhost:3000/api/${t}`,{phone:l.value,code:n.value},{withCredentials:!0});alert(o.value?"注册成功":"登录成功"),v.setUserInfo(_.data),c.push("/")}catch(t){alert("操作失败: "+((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||t.message)}};return(a,e)=>(x(),b("div",y,[s("h1",null,u(o.value?"注册":"登录"),1),s("div",k,[e[3]||(e[3]=s("label",null,"手机号",-1)),i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),type:"tel",placeholder:"请输入手机号"},null,512),[[p,l.value]])]),s("div",C,[e[4]||(e[4]=s("label",null,"验证码",-1)),s("div",V,[i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>n.value=t),type:"text",placeholder:"请输入验证码"},null,512),[[p,n.value]]),s("button",{onClick:g},"获取验证码")])]),s("button",{onClick:m,class:"submit-btn"},u(o.value?"注册":"登录"),1),s("p",{class:"toggle-text",onClick:e[2]||(e[2]=t=>o.value=!o.value)},u(o.value?"已有账号？去登录":"没有账号？去注册"),1)]))}},D=f(U,[["__scopeId","data-v-4f40462c"]]);export{D as default};
