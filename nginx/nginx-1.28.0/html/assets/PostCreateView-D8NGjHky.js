import{_ as v,r as g,c as f,h as a,ap as l,k as s,a as V,i as b,d as x,o as w,b as y,aq as k}from"./index-DPCorpo5.js";const C={class:"post-create-view"},U={style:{margin:"16px"}},h={__name:"PostCreateView",setup(q){const r=x(),t=g({title:"",content:"",cover_image:"",tags:"",user_id:1}),d=async()=>{const u=t.value.tags.split(",").map(e=>e.trim()).filter(e=>e);try{const e=await y.post("http://localhost:3000/api/posts",{user_id:t.value.user_id,title:t.value.title,content:t.value.content,cover_image:t.value.cover_image,tags:u});e.data.code===200?(k("发布成功"),r.push("/")):console.error("发布失败: "+e.data.message)}catch(e){console.error("发布帖子出错:",e)}},i=()=>{r.back()};return(u,e)=>{const c=l("van-nav-bar"),n=l("van-field"),m=l("van-cell-group"),p=l("van-button"),_=l("van-form");return w(),f("div",C,[a(c,{title:"发布动态","left-text":"返回","left-arrow":"",onClickLeft:i}),a(_,{onSubmit:d},{default:s(()=>[a(m,{inset:""},{default:s(()=>[a(n,{modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.title=o),name:"title",label:"标题",placeholder:"请输入标题",rules:[{required:!0,message:"请填写标题"}]},null,8,["modelValue"]),a(n,{modelValue:t.value.content,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.content=o),name:"content",label:"内容",type:"textarea",placeholder:"请输入内容",rows:"5",autosize:"",rules:[{required:!0,message:"请填写内容"}]},null,8,["modelValue"]),a(n,{modelValue:t.value.cover_image,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.cover_image=o),name:"cover_image",label:"封面图URL",placeholder:"请输入图片地址（可选）"},null,8,["modelValue"]),a(n,{modelValue:t.value.tags,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.tags=o),name:"tags",label:"标签",placeholder:"多个标签用逗号分隔（可选）"},null,8,["modelValue"])]),_:1}),V("div",U,[a(p,{round:"",block:"",type:"primary","native-type":"submit"},{default:s(()=>e[4]||(e[4]=[b(" 发布 ")])),_:1,__:[4]})])]),_:1})])}}},N=v(h,[["__scopeId","data-v-25bd9d6e"]]);export{N as default};
