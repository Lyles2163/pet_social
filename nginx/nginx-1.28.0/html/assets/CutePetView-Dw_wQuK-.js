import{u as q}from"./petStore-BrgahU0J.js";import{y as D,O as w,R as F,J as A,ac as y,j as n,F as L,e as x,a9 as j,_ as J,I as M,at as R,au as U,c as u,d as e,ai as T,av as _,t as d,m as P,l as G,C as H,i as K,aw as Q,o as g,p as W}from"./index-Dj3ETPvc.js";import{T as C,E as X}from"./index-le55krO_.js";import{I}from"./index-DSUXiWoH.js";const[Y,r]=A("card"),Z={tag:String,num:w,desc:String,thumb:String,title:String,price:w,centered:Boolean,lazyLoad:Boolean,currency:F("¥"),thumbLink:String,originPrice:w};var $=D({name:Y,props:Z,emits:["clickThumb"],setup(a,{slots:t,emit:h}){const s=()=>{if(t.title)return t.title();if(a.title)return n("div",{class:[r("title"),"van-multi-ellipsis--l2"]},[a.title])},l=()=>{if(t.tag||a.tag)return n("div",{class:r("tag")},[t.tag?t.tag():n(C,{mark:!0,type:"primary"},{default:()=>[a.tag]})])},c=()=>t.thumb?t.thumb():n(I,{src:a.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:a.lazyLoad},null),m=()=>{if(t.thumb||a.thumb)return n("a",{href:a.thumbLink,class:r("thumb"),onClick:o=>h("clickThumb",o)},[c(),l()])},p=()=>{if(t.desc)return t.desc();if(a.desc)return n("div",{class:[r("desc"),"van-ellipsis"]},[a.desc])},v=()=>{const o=a.price.toString().split(".");return n("div",null,[n("span",{class:r("price-currency")},[a.currency]),n("span",{class:r("price-integer")},[o[0]]),o.length>1&&n(L,null,[x("."),n("span",{class:r("price-decimal")},[o[1]])])])};return()=>{var o,f,i;const b=t.num||y(a.num),S=t.price||y(a.price),k=t["origin-price"]||y(a.originPrice),V=b||S||k||t.bottom,E=S&&n("div",{class:r("price")},[t.price?t.price():v()]),B=k&&n("div",{class:r("origin-price")},[t["origin-price"]?t["origin-price"]():`${a.currency} ${a.originPrice}`]),N=b&&n("div",{class:r("num")},[t.num?t.num():`x${a.num}`]),z=t.footer&&n("div",{class:r("footer")},[t.footer()]),O=V&&n("div",{class:r("bottom")},[(o=t["price-top"])==null?void 0:o.call(t),E,B,N,(f=t.bottom)==null?void 0:f.call(t)]);return n("div",{class:r()},[n("div",{class:r("header")},[m(),n("div",{class:r("content",{centered:a.centered})},[n("div",null,[s(),p(),(i=t.tags)==null?void 0:i.call(t)]),O])]),z])}}});const tt=j($),et={components:{VanList:U,VanCard:tt,VanImage:I,VanTag:C,VanNavBar:R,VanEmpty:X,VanIcon:M},setup(){const a=q(),t=H(()=>new Set(a.pets.map(m=>m.username)).size),h=c=>c===1?"男孩":"女孩",s=c=>{c.target.src="default-avatar.png"},l=async()=>{if(!a.finished)try{await a.fetchPets()}catch{Q("加载宠物信息失败")}};return K(()=>{a.resetState(),l()}),{petStore:a,uniqueOwnersCount:t,genderText:h,onLoad:l,handleImageError:s}}},nt={class:"cute-pet-container"},at={class:"nav-header"},st={key:0,class:"stats-card"},it={class:"stat-item"},rt={class:"stat-content"},ot={class:"stat-number"},ct={class:"stat-item"},dt={class:"stat-content"},lt={class:"stat-number"},mt={class:"pets-content"},vt={class:"pet-card"},ut={class:"pet-avatar-section"},_t={class:"avatar-wrapper"},gt={class:"favorite-btn"},ht={class:"pet-info-section"},pt={class:"pet-header"},ft={class:"pet-name"},bt={class:"pet-details"},wt={class:"detail-item"},yt={class:"detail-text"},St={class:"detail-item"},kt={class:"detail-text"},Tt={class:"owner-section"},Pt={class:"owner-info"},Lt={class:"owner-avatar-wrapper"},xt={class:"owner-details"},Ct={class:"owner-name"},It={class:"action-buttons"},Vt={class:"action-btn chat-btn"},Et={class:"action-btn more-btn"},Bt={key:0,class:"empty-state"};function Nt(a,t,h,s,l,c){const m=_("van-nav-bar"),p=_("van-image"),v=_("van-icon"),o=_("van-tag"),f=_("van-list");return g(),u("div",nt,[e("div",at,[n(m,{title:"🐾 可爱宠物列表","left-arrow":"",onClickLeft:t[0]||(t[0]=i=>a.$router.back()),class:"custom-nav"}),t[2]||(t[2]=e("div",{class:"nav-decoration"},null,-1))]),s.petStore.pets.length>0?(g(),u("div",st,[e("div",it,[t[4]||(t[4]=e("div",{class:"stat-icon"},"🐕",-1)),e("div",rt,[e("div",ot,d(s.petStore.pets.length),1),t[3]||(t[3]=e("div",{class:"stat-label"},"可爱宠物",-1))])]),t[7]||(t[7]=e("div",{class:"stat-divider"},null,-1)),e("div",ct,[t[6]||(t[6]=e("div",{class:"stat-icon"},"👥",-1)),e("div",dt,[e("div",lt,d(s.uniqueOwnersCount),1),t[5]||(t[5]=e("div",{class:"stat-label"},"宠物主人",-1))])])])):T("",!0),e("div",mt,[n(f,{loading:s.petStore.loading,"onUpdate:loading":t[1]||(t[1]=i=>s.petStore.loading=i),finished:s.petStore.finished,"finished-text":"🎉 没有更多可爱的宠物了",onLoad:s.onLoad,offset:"300",class:"pet-list"},{default:P(()=>[(g(!0),u(L,null,G(s.petStore.pets,(i,b)=>(g(),u("div",{key:i.id,class:"pet-card-wrapper",style:W({animationDelay:`${b*.1}s`})},[e("div",vt,[e("div",ut,[e("div",_t,[n(p,{width:"100",height:"100",fit:"cover",src:i.avatar||"default-avatar.png",onError:s.handleImageError,class:"pet-avatar"},null,8,["src","onError"]),t[8]||(t[8]=e("div",{class:"avatar-ring"},null,-1)),e("div",gt,[n(v,{name:"like",size:"16",color:"#ff6b6b"})])])]),e("div",ht,[e("div",pt,[e("h3",ft,d(i.name),1),n(o,{type:i.gender===1?"primary":"danger",class:"gender-tag",round:""},{default:P(()=>[x(d(s.genderText(i.gender)),1)]),_:2},1032,["type"])]),e("div",bt,[e("div",wt,[t[9]||(t[9]=e("span",{class:"detail-icon"},"🐾",-1)),e("span",yt,"品种："+d(i.species),1)]),e("div",St,[t[10]||(t[10]=e("span",{class:"detail-icon"},"🎂",-1)),e("span",kt,"年龄："+d(i.age)+"岁",1)])]),e("div",Tt,[e("div",Pt,[e("div",Lt,[n(p,{width:"32",height:"32",round:"",src:i.owner_avatar||"default-avatar.png",onError:s.handleImageError,class:"owner-avatar"},null,8,["src","onError"])]),e("div",xt,[t[11]||(t[11]=e("span",{class:"owner-label"},"主人",-1)),e("span",Ct,d(i.username),1)])]),e("div",It,[e("div",Vt,[n(v,{name:"chat-o",size:"14"})]),e("div",Et,[n(v,{name:"ellipsis",size:"14"})])])])])])],4))),128))]),_:1},8,["loading","finished","onLoad"]),!s.petStore.loading&&s.petStore.finished&&s.petStore.pets.length===0?(g(),u("div",Bt,t[12]||(t[12]=[e("div",{class:"empty-icon"},"🐕‍🦺",-1),e("div",{class:"empty-title"},"暂无宠物信息",-1),e("div",{class:"empty-desc"},"快来分享你的可爱宠物吧！",-1)]))):T("",!0)])])}const Ft=J(et,[["render",Nt],["__scopeId","data-v-30369172"]]);export{Ft as default};
