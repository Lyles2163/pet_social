import{_ as V,h as w,r as c,c as d,b as u,d as e,ap as p,w as o,ai as m,v as r,t as f,g as S,ar as k,o as n}from"./index-Dj3ETPvc.js";const C={class:"post-create-view"},U={class:"main-container"},P={class:"form-group"},B={key:0,class:"error-message"},D={key:0,class:"error-message"},N={class:"form-field"},E={class:"form-field"},F={__name:"PostCreateView",setup(R){const v=S(),b=w(),a=c({title:"",content:"",cover_image:"",tags:"",user_id:1}),l=c({title:"",content:""}),g=()=>{let i=!0;return l.value.title="",l.value.content="",a.value.title.trim()||(l.value.title="请填写标题",i=!1),a.value.content.trim()||(l.value.content="请填写内容",i=!1),i},x=async i=>{if(i.preventDefault(),!g())return;const t=a.value.tags.split(",").map(s=>s.trim()).filter(s=>s);try{const s=await b.createPost({user_id:a.value.user_id,title:a.value.title,content:a.value.content,cover_image:a.value.cover_image,tags:t});s.code===200?(k("发布成功"),v.push("/")):console.error("发布失败: "+s.message)}catch(s){console.error("发布帖子出错:",s)}},y=()=>{v.back()};return(i,t)=>(n(),d("div",C,[t[16]||(t[16]=u('<div class="bg-decoration" data-v-a1c38220><div class="bg-circle bg-circle-1" data-v-a1c38220></div><div class="bg-circle bg-circle-2" data-v-a1c38220></div><div class="bg-circle bg-circle-3" data-v-a1c38220></div><div class="bg-star bg-star-1" data-v-a1c38220>✨</div><div class="bg-star bg-star-2" data-v-a1c38220>🌟</div><div class="bg-star bg-star-3" data-v-a1c38220>💫</div></div>',1)),e("div",{class:"gradient-top-bar"},[e("div",{class:"custom-nav-bar"},[e("div",{class:"nav-left",onClick:y},t[4]||(t[4]=[e("span",{class:"nav-arrow"},"←",-1),e("span",{class:"nav-text"},"返回",-1)])),t[5]||(t[5]=e("div",{class:"nav-title"},"📝 发布动态",-1)),t[6]||(t[6]=e("div",{class:"nav-right"},null,-1))])]),e("div",U,[e("form",{onSubmit:x,class:"beautiful-form"},[t[12]||(t[12]=e("div",{class:"form-header"},[e("div",{class:"form-header-icon"},"📝"),e("h2",{class:"form-header-title"},"分享您的动态"),e("p",{class:"form-header-subtitle"},"与社区分享您的宠物生活点滴")],-1)),e("div",P,[e("div",{class:p(["form-field",{"has-error":l.value.title}])},[t[7]||(t[7]=e("label",{for:"title",class:"field-label"},"📌 标题",-1)),o(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=s=>a.value.title=s),type:"text",class:"field-input",placeholder:"请输入标题"},null,512),[[r,a.value.title]]),l.value.title?(n(),d("div",B,f(l.value.title),1)):m("",!0)],2),e("div",{class:p(["form-field",{"has-error":l.value.content}])},[t[8]||(t[8]=e("label",{for:"content",class:"field-label"},"📄 内容",-1)),o(e("textarea",{id:"content","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.content=s),class:"field-input textarea-input",placeholder:"请输入内容",rows:"5"},null,512),[[r,a.value.content]]),l.value.content?(n(),d("div",D,f(l.value.content),1)):m("",!0)],2),e("div",N,[t[9]||(t[9]=e("label",{for:"cover_image",class:"field-label"},"🖼️ 封面图URL",-1)),o(e("input",{id:"cover_image","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.cover_image=s),type:"text",class:"field-input",placeholder:"请输入图片地址（可选）"},null,512),[[r,a.value.cover_image]])]),e("div",E,[t[10]||(t[10]=e("label",{for:"tags",class:"field-label"},"🏷️ 标签",-1)),o(e("input",{id:"tags","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.tags=s),type:"text",class:"field-input",placeholder:"多个标签用逗号分隔（可选）"},null,512),[[r,a.value.tags]]),t[11]||(t[11]=e("div",{class:"field-tip"},"例如：猫咪,日常,萌宠",-1))])]),t[13]||(t[13]=u('<div class="submit-container" data-v-a1c38220><button type="submit" class="submit-button" data-v-a1c38220><span class="button-icon" data-v-a1c38220>✨</span><span class="button-text" data-v-a1c38220>发布动态</span><div class="button-ripple" data-v-a1c38220></div></button></div>',1))],32),t[14]||(t[14]=e("div",{class:"side-decoration side-decoration-left"},[e("div",{class:"deco-line"})],-1)),t[15]||(t[15]=e("div",{class:"side-decoration side-decoration-right"},[e("div",{class:"deco-line"})],-1))]),t[17]||(t[17]=e("div",{class:"bottom-decoration"},[e("div",{class:"decoration-line"}),e("div",{class:"brand-slogan"},"💫 分享美好时光 · 记录幸福瞬间"),e("div",{class:"decoration-line"})],-1))]))}},z=V(F,[["__scopeId","data-v-a1c38220"]]);export{z as default};
