import{ax as o,a,f as r}from"./index-Dj3ETPvc.js";const n=o("pet",{state:()=>({pets:[],loading:!1,finished:!1}),actions:{async fetchPets(){this.loading=!0;try{const e=a(),{data:s}=await r.get(`${e.POST_NAME}pets`,{withCredentials:!0});return this.pets=s.map(t=>({...t,avatar:t.avatar||"default-avatar.png"})),this.finished=!0,this.pets}catch(e){throw console.error("加载宠物信息失败:",e),e}finally{this.loading=!1}},async createPet(e){try{const s=a(),t=await r.post(`${s.POST_NAME}pets`,e);return t.data.code===200?(await this.fetchPets(),{success:!0,message:"发布成功"}):{success:!1,message:t.data.message||"发布失败"}}catch(s){return console.error("发布宠物信息出错:",s),{success:!1,message:s.message||"发布宠物信息出错"}}},resetState(){this.loading=!1,this.finished=!1}}});export{n as u};
